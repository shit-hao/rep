

https是基于ssl协议进行的加密
https = http+ssl
先梳理一下ssl加密过程
1:客户端给出支持SSL协议版本号，一个客户端随机数(Client random，请注意这是第一个随机数)，客户端支持的加密方法等信息；
2:服务端收到信息后，确认双方使用的加密方法，并返回数字证书，一个服务器生成的随机数(Server random，注意这是第二个随机数)等信息；
3:客户端确认数字证书的有效性，然后生成一个新的随机数(Premaster secret)，然后使用数字证书中的公钥，加密这个随机数，发给服务端。
4:服务端使用自己的私钥，获取客户端发来的随机数(即Premaster secret)；(第三、四步就是非对称加密的过程了)
5:客户端和服务端通过约定的加密方法(通常是AES算法)，使用前面三个随机数，生成对话密钥，用来加密接下来的通信内容；


使用3个密钥去生成最后的 对称加密过程中的密钥 前2个是不安全的 主要是最后一个 被操作系统CA证书加密的串

https://www.jianshu.com/p/7158568e4867
https://juejin.cn/post/6955767063524671524
1、浏览器向服务器发起请求；
2、目标服务器收到请求，将数字证书返回给浏览器（包括公钥B+ + 数字签名，一些算法，）+网站明文数据；
3、浏览器收到证书之后，先取到签名，利用浏览器预存的CA机构的公钥A+，对签名进行解密，解密之后得到一份数据摘要（假设叫T），接着利用证书里面提供的Hash算法对明文数据进行Hash，又得到一份数据摘要（假设叫S）。此时，如果 T=S ，那认为这份证书就是有效的。有效则进行下一步，否则直接断开连接；
4、浏览器从证书里面取出目标网站的公钥B+，然后在本地生成一个密钥X，接着利用公钥B+ 对密钥X进行加密，加密之后传输给服务器；
5、服务器收到数据，利用私钥B-对数据进行解密，拿到浏览器生成的密钥X；
6、之后双方的通信，都用密钥X加密之后进行。
