执行环境（也就是常说的上下文this）和作用域是js中很基础也很重要的概念， 但在很多时候，特别是看其他的文档的时候，却容易混淆概念，这篇文章试着梳理下执行环境和作用域的概念。

1.执行环境
执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个相关联的变量对象，这个对象里面保存了环境中定义的所有变量和函数。这个变量对象在编写代码是不能访问的（除了最外层的window对象），只有解析器在后台处理才能使用。

执行环境可以分成两种：全局执行环境和函数执行环境。在执行js代码之前，默认都会创建一个全局的执行环境，与之关联的是window对象，里面保存了所有全局变量和函数，直到页面关闭时才销毁。而当执行某个函数时，会创建一个活动对象，并把这个对象作为与该函数的执行环境关联的变量对象，从而创建出函数的执行环境。函数的执行环境在函数执行完之后，就会被销毁。

2.作用域
了解执行环境，就可以来说作用域了。

在js中，执行环境是用环境栈来管理的。最底层的是全局执行环境，当执行到一个函数， 函数的执行环境就会被推入到环境栈中。如果在函数中继续执行函数，那么内部函数的执行环境就继续被推入环境栈。例如下面的代码：



ps: 栈(先进后出)，堆(先进先出)